# üç∫ BeerCoin V2 - Decentralized Token Distribution System

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Network: Gnosis Chain](https://img.shields.io/badge/Network-Gnosis%20Chain-green.svg)](https://gnosisscan.io/)
[![Status: Live](https://img.shields.io/badge/Status-Live-brightgreen.svg)](https://katppysu.manus.space)

A comprehensive decentralized application (DApp) built on Gnosis Chain that implements a referral-based token distribution system with time-based rewards. BeerCoin V2 features an improved user registration flow where trusted users can directly onboard new participants through QR code scanning and approval.

## üìã Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [Smart Contracts](#smart-contracts)
- [Web Application](#web-application)
- [Deployment Information](#deployment-information)
- [User Guide](#user-guide)
- [Developer Guide](#developer-guide)
- [Testing](#testing)
- [Security](#security)
- [Contributing](#contributing)
- [License](#license)

## üéØ Overview

BeerCoin V2 represents a significant evolution of the original BeerCoin system, addressing key user experience challenges while maintaining the core functionality of referral-based token distribution. The system operates on Gnosis Chain, leveraging its low transaction costs and fast confirmation times to provide an optimal user experience.

### Key Improvements in V2

The V2 upgrade introduces a revolutionary registration flow that eliminates the friction previously experienced by new users. Instead of requiring new users to know a trusted user's address beforehand, the system now enables trusted users to scan QR codes generated by prospective members and approve their registration directly. This change transforms the onboarding process from a complex coordination effort into a simple, intuitive interaction.

The technical architecture has been enhanced with improved smart contract functions, better error handling, and a more robust web application that provides real-time feedback and seamless mobile experience. The system maintains backward compatibility with V1 while introducing new capabilities that scale more effectively as the user base grows.

## ‚ú® Features

### Core Functionality

**Referral-Based Token Distribution**: The system implements a sophisticated referral mechanism where existing trusted users can onboard new participants. Each successful referral increases the trusted user's earning multiplier, creating incentives for organic growth and community building.

**Time-Based Rewards**: All registered users earn BEER tokens at a base rate of 0.001 tokens per second. This continuous distribution model ensures that active participants are consistently rewarded for their engagement with the platform.

**Dynamic Multipliers**: Trusted users receive enhanced earning rates based on their referral activity. The current multiplier system provides a 1.5x bonus for each successful referral, encouraging trusted users to actively participate in community growth.

**Administrative Controls**: The system includes comprehensive administrative functions that allow for system management, user moderation, and parameter adjustments. Administrators can add or remove trusted users, adjust reward rates, and manage the overall token distribution.

### User Experience Enhancements

**QR Code Integration**: The V2 system introduces seamless QR code functionality that simplifies the registration process. New users generate a QR code containing their registration information, which trusted users can scan to initiate the approval process.

**Mobile-First Design**: The web application has been optimized for mobile devices, recognizing that most users will interact with the system through their smartphones. The interface adapts seamlessly to different screen sizes and provides touch-optimized controls.

**Real-Time Updates**: The application provides live updates of token balances, pending rewards, and system status. Users can monitor their earnings and account status without needing to refresh the page or perform manual updates.

**Wallet Integration**: The system includes built-in wallet functionality that allows users to create, import, and manage their Ethereum wallets directly within the application. This eliminates the need for external wallet software and reduces barriers to entry.

## üèó Architecture

### System Components

The BeerCoin V2 system consists of three primary components that work together to provide a complete decentralized application experience:

**Smart Contract Layer**: Two main contracts deployed on Gnosis Chain handle all blockchain interactions. The BeerCoinV2 contract manages token operations including minting, transfers, and balance tracking. The BeerCoinDistributorV2 contract handles user registration, referral tracking, and automated token distribution.

**Web Application Layer**: A React-based single-page application provides the user interface for all system interactions. The application communicates directly with the smart contracts through the ethers.js library, eliminating the need for centralized backend services.

**Infrastructure Layer**: The system leverages Gnosis Chain's infrastructure for transaction processing and state management. Additional services include IPFS for decentralized storage of metadata and various RPC providers for reliable blockchain connectivity.

### Data Flow

User interactions begin in the web application, where actions are translated into smart contract function calls. These calls are submitted to the Gnosis Chain network, where they are processed by miners and included in blocks. The smart contracts emit events that the web application monitors to provide real-time updates to users.

The registration flow specifically involves multiple steps: new users create accounts locally, generate QR codes containing their information, trusted users scan these codes and submit approval transactions, and the smart contract processes these approvals to activate new accounts and begin token distribution.

## üìú Smart Contracts

### BeerCoinV2 Contract

**Address**: `0x2567c78AADF441cbee3FeE53a0D039023e0551c8`

The BeerCoinV2 contract implements the ERC-20 token standard with additional functionality specific to the BeerCoin ecosystem. The contract includes standard token operations such as transfers, approvals, and balance queries, while also providing administrative functions for minting and ownership management.

Key features include a total supply cap of 100 million tokens, with an initial supply of 1 million tokens minted at deployment. The contract supports standard ERC-20 operations and includes additional security features such as ownership controls and emergency pause functionality.

The token uses 18 decimal places, following the ERC-20 standard, and implements all required functions for compatibility with existing Ethereum infrastructure including exchanges, wallets, and other DeFi protocols.

### BeerCoinDistributorV2 Contract

**Address**: `0xFB8E611686F21eC845AeD71F8ed942cA3C1150d9`

The BeerCoinDistributorV2 contract serves as the core logic engine for the BeerCoin ecosystem. This contract manages user registration, referral tracking, reward calculation, and token distribution. It maintains comprehensive user profiles including registration status, trust levels, referral relationships, and earning history.

The contract implements several key functions:

**User Registration**: The `registerUserByTrusted` function allows trusted users to register new participants by providing their address and chosen username. This function validates that the caller is an active trusted user, ensures the username is unique, and establishes the referral relationship.

**Reward Distribution**: The contract calculates and tracks rewards for all registered users based on their registration time and referral status. Rewards accumulate continuously and can be claimed by users at any time.

**Administrative Functions**: Various administrative functions allow system operators to manage trusted users, adjust reward parameters, and maintain system health. These functions are protected by ownership controls to prevent unauthorized access.

**Query Functions**: Multiple view functions provide access to user information, system statistics, and configuration parameters. These functions enable the web application to display current system state without requiring transaction fees.

### Contract Interactions

The two contracts work together to provide the complete BeerCoin experience. The BeerCoinV2 contract handles all token-related operations, while the BeerCoinDistributorV2 contract manages the business logic and user relationships. The distributor contract has minting privileges on the token contract, allowing it to create new tokens as rewards are distributed.

This separation of concerns provides several benefits including easier upgrades, clearer security boundaries, and more efficient gas usage. Users primarily interact with the distributor contract for most operations, while the token contract handles standard ERC-20 functionality.

## üíª Web Application

### Technology Stack

The BeerCoin V2 web application is built using modern web technologies optimized for performance, security, and user experience:

**Frontend Framework**: React 18 with hooks and functional components provides a responsive and interactive user interface. The application uses Vite as the build tool for fast development and optimized production builds.

**Blockchain Integration**: Ethers.js v6 handles all blockchain interactions including contract calls, transaction signing, and event monitoring. The library provides a clean abstraction over the underlying Ethereum JSON-RPC protocol.

**Styling and UI**: Tailwind CSS provides utility-first styling with a custom design system optimized for the BeerCoin brand. The application includes custom components for common UI patterns and responsive design across all device sizes.

**State Management**: React Context API manages application state including wallet information, user data, and contract interaction status. This approach provides centralized state management without the complexity of external state management libraries.

### Key Components

**Wallet Management**: The application includes comprehensive wallet functionality allowing users to create new wallets, import existing wallets from private keys or mnemonic phrases, and securely store wallet information in browser local storage.

**Registration System**: The registration interface guides new users through the account creation process, including username selection, QR code generation, and status monitoring. The system provides clear feedback at each step and handles error conditions gracefully.

**Dashboard Interface**: The main dashboard provides users with a comprehensive view of their account status including token balances, pending rewards, referral information, and recent activity. The interface updates in real-time as blockchain events occur.

**QR Code Functionality**: Both generation and scanning of QR codes are handled natively within the application. New users can generate codes for registration, while trusted users can scan codes to approve new members.

### Security Features

The web application implements several security measures to protect user funds and data:

**Local Key Storage**: Private keys are stored encrypted in browser local storage and never transmitted to external servers. Users maintain full control over their cryptographic keys at all times.

**Transaction Validation**: All transactions are validated client-side before submission to prevent common errors such as insufficient balances or invalid addresses. Users receive clear confirmation dialogs before signing transactions.

**Error Handling**: Comprehensive error handling provides users with meaningful feedback when operations fail. The system distinguishes between different error types and provides appropriate recovery suggestions.

## üöÄ Deployment Information

### Live System Details

**Web Application**: https://katppysu.manus.space
**Network**: Gnosis Chain (Chain ID: 100)
**Block Explorer**: https://gnosisscan.io/

The current deployment represents the latest stable version of BeerCoin V2 with all recent fixes and improvements. The system has been thoroughly tested and is ready for production use.

### Contract Addresses

| Contract | Address | Purpose |
|----------|---------|---------|
| BeerCoinV2 | `0x2567c78AADF441cbee3FeE53a0D039023e0551c8` | ERC-20 token contract |
| BeerCoinDistributorV2 | `0xFB8E611686F21eC845AeD71F8ed942cA3C1150d9` | Distribution and user management |

### System Status

**Total Users**: 2 (1 admin, 1 trusted user)
**Total Trusted Users**: 2
**Distribution Status**: Active
**Base Reward Rate**: 0.001 BEER per second
**Referral Multiplier**: 1.5x per referral

The system is currently operational with all core functions working correctly. Recent fixes have resolved issues with username availability checking and balance display, ensuring a smooth user experience.

## üìñ User Guide

### Getting Started

New users can begin using BeerCoin V2 by visiting the web application and following the registration process. The system guides users through each step with clear instructions and visual feedback.

**Step 1: Create Wallet**: Users start by creating a new wallet directly in the browser. The system generates a secure private key and provides users with their wallet address and backup information.

**Step 2: Choose Username**: Users select a unique username that will identify them within the BeerCoin community. The system validates username availability in real-time.

**Step 3: Generate QR Code**: The application generates a QR code containing the user's registration information. This code can be shared with trusted users for approval.

**Step 4: Get Approved**: Users present their QR code to any trusted user, who can scan it and approve the registration. This process typically takes just a few seconds.

**Step 5: Start Earning**: Once approved, users immediately begin earning BEER tokens at the base rate. Tokens accumulate continuously and can be claimed at any time.

### For Trusted Users

Trusted users have additional responsibilities and capabilities within the BeerCoin ecosystem:

**Approving New Users**: Trusted users can scan QR codes generated by prospective members and approve their registration. This process involves reviewing the user's information and submitting an approval transaction.

**Earning Bonuses**: Each successful referral increases the trusted user's earning multiplier, providing additional token rewards. The current system provides a 1.5x bonus for each active referral.

**Community Building**: Trusted users play a crucial role in growing the BeerCoin community by identifying and onboarding new participants who will contribute positively to the ecosystem.

### Managing Your Account

The BeerCoin V2 application provides comprehensive account management features:

**Balance Monitoring**: Users can view their current BEER token balance, pending rewards, and xDAI balance for transaction fees. All balances update in real-time.

**Reward Claiming**: Accumulated rewards can be claimed at any time by submitting a claim transaction. The system calculates rewards based on registration time and referral status.

**Token Transfers**: Users can send BEER tokens to other addresses using the built-in transfer functionality. The system validates recipient addresses and available balances before processing transfers.

**Wallet Backup**: Users should securely backup their wallet information including private keys and mnemonic phrases. This information is required to recover access if the browser data is lost.

## üõ† Developer Guide

### Local Development Setup

Developers interested in contributing to BeerCoin V2 or deploying their own instance can follow these setup instructions:

**Prerequisites**: Node.js version 16 or higher, npm or yarn package manager, and access to a Gnosis Chain RPC endpoint.

**Smart Contract Development**: The contracts are built using Hardhat, a popular Ethereum development framework. Developers can compile, test, and deploy contracts using the provided scripts and configuration.

**Web Application Development**: The React application uses Vite for fast development and building. The development server provides hot reloading and comprehensive error reporting.

**Testing Environment**: The project includes comprehensive test suites for both smart contracts and web application components. Tests can be run locally or in continuous integration environments.

### Contract Development

The smart contracts are written in Solidity and follow best practices for security and gas optimization:

**Development Framework**: Hardhat provides the development environment with compilation, testing, and deployment tools. The configuration supports multiple networks including local development, testnets, and mainnet.

**Testing Strategy**: Contract tests use the Hardhat testing framework with comprehensive coverage of all functions and edge cases. Tests include unit tests for individual functions and integration tests for complete user flows.

**Security Considerations**: The contracts implement standard security patterns including access controls, input validation, and protection against common vulnerabilities such as reentrancy attacks.

**Gas Optimization**: Contract functions are optimized for gas efficiency while maintaining readability and security. The system uses efficient data structures and minimizes storage operations.

### Web Application Development

The React application follows modern development practices and patterns:

**Component Architecture**: The application uses a component-based architecture with clear separation of concerns. Components are organized by functionality and reusability.

**State Management**: React Context provides centralized state management for wallet information, user data, and application status. This approach scales well and provides good developer experience.

**API Integration**: The application communicates with smart contracts through ethers.js, providing a clean abstraction over blockchain interactions. All contract calls are properly typed and validated.

**Build Process**: Vite provides fast development builds and optimized production bundles. The build process includes code splitting, asset optimization, and progressive web app features.

## üß™ Testing

### Smart Contract Testing

The BeerCoin V2 smart contracts include comprehensive test coverage ensuring reliability and security:

**Test Coverage**: Over 22 test cases cover all contract functions including normal operations, edge cases, and error conditions. The test suite achieves near 100% code coverage.

**Test Categories**: Tests are organized into categories including unit tests for individual functions, integration tests for complete workflows, and security tests for potential vulnerabilities.

**Automated Testing**: The test suite runs automatically on code changes through continuous integration, ensuring that new changes don't break existing functionality.

**Gas Analysis**: Tests include gas usage analysis to ensure that contract operations remain cost-effective as the system scales.

### Web Application Testing

The React application includes both automated and manual testing procedures:

**Component Testing**: Individual components are tested in isolation to ensure they render correctly and handle user interactions appropriately.

**Integration Testing**: End-to-end tests verify that complete user workflows function correctly, including wallet creation, registration, and token operations.

**Cross-Browser Testing**: The application is tested across multiple browsers and devices to ensure consistent behavior and appearance.

**Performance Testing**: Load testing ensures that the application performs well under various usage conditions and network environments.

## üîí Security

### Smart Contract Security

The BeerCoin V2 smart contracts implement multiple security measures to protect user funds and system integrity:

**Access Controls**: Administrative functions are protected by ownership controls that prevent unauthorized access. Only designated addresses can perform sensitive operations.

**Input Validation**: All user inputs are validated to prevent injection attacks and ensure data integrity. The contracts reject invalid or malicious inputs gracefully.

**Reentrancy Protection**: The contracts implement standard reentrancy guards to prevent attacks that could drain funds or manipulate state.

**Upgrade Safety**: The contracts are designed to be upgradeable through proxy patterns while maintaining security and preventing unauthorized modifications.

### Web Application Security

The web application implements security best practices to protect user data and prevent common web vulnerabilities:

**Key Management**: Private keys are stored encrypted in browser local storage and never transmitted to external servers. Users maintain full control over their cryptographic material.

**HTTPS Enforcement**: All communications use HTTPS encryption to prevent man-in-the-middle attacks and protect sensitive data in transit.

**Content Security Policy**: The application implements strict content security policies to prevent cross-site scripting attacks and unauthorized code execution.

**Regular Updates**: Dependencies are regularly updated to address known vulnerabilities and maintain security posture.

### Operational Security

The deployed system includes operational security measures to ensure ongoing protection:

**Monitoring**: Automated monitoring systems track contract activity and alert administrators to unusual patterns or potential security issues.

**Incident Response**: Procedures are in place to respond quickly to security incidents including emergency pause functionality and user communication protocols.

**Regular Audits**: The system undergoes regular security audits by qualified professionals to identify and address potential vulnerabilities.

## ü§ù Contributing

The BeerCoin V2 project welcomes contributions from developers, designers, and community members. Contributors can help improve the system through code contributions, documentation updates, testing, and community support.

### Development Contributions

Developers can contribute to both smart contract and web application development:

**Code Contributions**: Submit pull requests with new features, bug fixes, or improvements. All contributions should include appropriate tests and documentation.

**Issue Reporting**: Report bugs or suggest improvements through the project's issue tracking system. Provide detailed information to help maintainers understand and address issues.

**Code Review**: Participate in code review processes to help maintain code quality and share knowledge with other contributors.

### Community Contributions

Non-technical contributors can support the project in various ways:

**Documentation**: Help improve documentation including user guides, developer documentation, and community resources.

**Testing**: Participate in testing new features and provide feedback on user experience and functionality.

**Community Support**: Help other users through forums, chat channels, and community events.

**Translation**: Assist with translating the application and documentation into different languages to support global adoption.

## üìÑ License

BeerCoin V2 is released under the MIT License, providing maximum flexibility for use, modification, and distribution. This license allows commercial and non-commercial use while requiring attribution to the original authors.

The MIT License is chosen to encourage adoption and innovation while maintaining simplicity and clarity. Users and developers can freely use, modify, and distribute the software while understanding their rights and obligations.

---

**Created by**: Manus AI  
**Last Updated**: January 29, 2025  
**Version**: 2.0.0  
**Network**: Gnosis Chain  
**Status**: Production Ready

For support, questions, or contributions, please visit the project repository or contact the development team through the official channels.

